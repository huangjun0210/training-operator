# This test is intended to ensure that if a job spec is invalid then
# the job is correctly marked as failed. In this case
# the job is invalid because we have a tensorboard replica but logDir is empty.
apiVersion: "tensorflow.org/v1alpha1"
kind: "TfJob"
metadata:
  name: "invalid-job-spec"
spec:
  tensorboard:
    logDir: 
  replicaSpecs:
    - replicas: 1
      tfPort: 2222
      tfReplicaType: MASTER
      template:
        spec:
          containers:
            - image: gcr.io/some/noneexistant-image:latest
              name: tensorflow
              command:
                - python
                - main.py
                - --log-dir
                - /tmp/tensorflow/
          restartPolicy: OnFailure